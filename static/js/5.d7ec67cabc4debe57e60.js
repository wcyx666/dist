webpackJsonp([5],{H6RF:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){return{loading:!0,tableData5:[],roles:"",currentPage:1,pagesize:20,total:3,formInline:{searchIup:"",region:""}}},mounted:function(){this.PageOrderList(),this.roles=this.$store.state.userInfo.roles},methods:{handleSizeChange:function(e){this.pagesize=e,this.PageOrderList(),console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,this.PageOrderList(),console.log(this.currentPage)},PageOrderList:function(){var e=this,t="/api"+this.$common.order_page,a={offset:e.currentPage,limit:e.pagesize};e.$http.post(t,a).then(function(t){console.log(t),"200"==t.code&&(e.tableData5=t.data,e.total=t.num,setTimeout(function(){e.loading=!1},2e3))}).catch(function(e){})},orderList:function(){var e="/api"+this.$common.order_all,t=this;this.$http.post(e).then(function(e){console.log(e),"200"==e.code?(t.tableData5=e.data,setTimeout(function(){t.loading=!1},2e3)):"404"==e.code&&(sessionStorage.clear(),t.$router.push({path:"/login"}))}).catch(function(e){})},handleEdit:function(e,t){var a=this,o=this;this.loading=!0,o.$prompt("请输入接单人姓名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var n=e.value;console.log(n);var s="/api"+o.$common.project,r={order_oid:t,project:n};o.$http.post(s,r).then(function(e){console.log(e),1==e.code?(setTimeout(function(){a.loading=!1},2e3),a.$message({message:"增加接单人成功",type:"success"})):a.$message({message:"增加接单人失败",type:"success"})}).catch(function(e){a.$message({message:"增加接单人失败",type:"success"})})}).catch(function(){})},handleDone:function(e,t){var a=this,o=this;this.loading=!0,this.$confirm("是否已经完成订单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="/api"+o.$common.done,n={order_oid:t};o.$http.post(e,n).then(function(e){console.log(e),1==e.status?(setTimeout(function(){this.loading=!1},2e3),o.$message({message:"完成订单",type:"success"})):o.$message({message:"完成订单失败",type:"success"})}).catch(function(e){a.$message({message:"完成订单失败",type:"success"})})}).catch(function(){})},onSubmit:function(){var e=this,t=void 0,a={order_oid:this.formInline.searchIup};this.loading=!0,"id"==this.formInline.region?t="/api"+this.$common.orderSearchId:"mobile"==this.formInline.region&&(t="/api"+this.$common.orderSearchMobile),""==this.formInline.searchIup?(this.orderList(),setTimeout(function(){e.loading=!1},2e3)):this.$http.post(t,a).then(function(t){console.log(t),1==t.status&&(setTimeout(function(){e.loading=!1},2e3),e.tableData5=t.data)}).catch(function(t){e.$message({message:"搜索失败",type:"success"})})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order"},[a("div",{staticClass:"order_search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"查询方式"}},[a("el-select",{attrs:{placeholder:"请选择查询方式"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[a("el-option",{attrs:{label:"订单编号",value:"id"}}),e._v(" "),a("el-option",{attrs:{label:"用户手机号",value:"mobile"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"内容"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.formInline.searchIup,callback:function(t){e.$set(e.formInline,"searchIup",t)},expression:"formInline.searchIup"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData5}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品编号"}},[a("span",[e._v(e._s(t.row.order_oid))])]),e._v(" "),a("el-form-item",{attrs:{label:"用户编号"}},[a("span",[e._v(e._s(t.row.user_id))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品类型"}},[a("span",[e._v(e._s(t.row.comm_type))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("span",[e._v(e._s(t.row.order_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"房屋面积"}},[a("span",[e._v(e._s(t.row.order_per))])]),e._v(" "),a("el-form-item",{attrs:{label:"预约时间"}},[a("span",[e._v(e._s(t.row.make_date))])]),e._v(" "),a("el-form-item",{attrs:{label:"下单时间"}},[a("span",[e._v(e._s(t.row.place_time))])]),e._v(" "),a("el-form-item",{attrs:{label:"小区地址"}},[a("span",[e._v(e._s(t.row.user_addree))])]),e._v(" "),a("el-form-item",{attrs:{label:"号楼门牌"}},[a("span",[e._v(e._s(t.row.user_num))])]),e._v(" "),a("el-form-item",{attrs:{label:"用户姓名"}},[a("span",[e._v(e._s(t.row.user_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"手机号码"}},[a("span",[e._v(e._s(t.row.user_mobile))])]),e._v(" "),a("el-form-item",{attrs:{label:"支付方式"}},[0==t.row.play_way?a("span",[e._v("微信支付")]):e._e(),e._v(" "),1==t.row.play_way?a("span",[e._v("线下支付")]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"支付价格"}},[a("span",[e._v(e._s(t.row.order_price))])]),e._v(" "),a("el-form-item",{attrs:{label:"接单人"}},[a("span",[e._v(e._s(t.row.project))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品编号",prop:"order_oid"}}),e._v(" "),a("el-table-column",{attrs:{label:"下单时间",prop:"place_time"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品类型",prop:"comm_type"}}),e._v(" "),a("el-table-column",{attrs:{label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.play_way?a("span",[e._v("微信支付")]):e._e(),e._v(" "),1==t.row.play_way?a("span",[e._v("线下支付")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.order_type?a("span",[e._v("未支付")]):e._e(),e._v(" "),1==t.row.order_type?a("span",[e._v("进行中")]):e._e(),e._v(" "),2==t.row.order_type?a("span",[e._v("已完成")]):e._e(),e._v(" "),3==t.row.order_type?a("span",[e._v("已取消")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row.order_oid)}}},[e._v("接单")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDone(t.$index,t.row.order_oid)}}},[e._v("完成")]),e._v(" "),"admin"==e.roles?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,n,!1,function(e){a("WDUH")},"data-v-b07c691a",null);t.default=s.exports},WDUH:function(e,t){}});
//# sourceMappingURL=5.d7ec67cabc4debe57e60.js.map