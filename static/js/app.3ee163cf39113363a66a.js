webpackJsonp([13],{"+cgv":function(e,n){},"3f40":function(e,n){},"4qOc":function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("Dd8w"),r=t.n(o),a=t("7+uW"),u={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var s=t("VU/8")({name:"App"},u,!1,function(e){t("cy71")},null,null).exports,i=t("/ocq"),c=t("//Fk"),l=t.n(c),d=t("NYxO"),p=t("mtWM"),f=t.n(p);t("Ya8g");function m(e,n){return!n.meta||!n.meta.role||e.some(function(e){return n.meta.role.indexOf(e)>=0})}a.default.use(d.a);var h={token:"",routers:k,addRouters:[],uid:"",userInfo:"",id:"",psw:""},g={GenerateRoutes:function(e,n){var t=e.commit;return new l.a(function(e){var o=n.roles,r=S.filter(function(e){return!!m(o,e)&&(e.children&&e.children.length>0?(e.children=e.children.filter(function(e){return!!m(o,e)&&e}),e):e)});t("SET_ROUTERS",r),e()})},GetUserInfo:function(e){var n=e.commit;return new l.a(function(e,t){var o={uid:sessionStorage.getItem("uid"),token:sessionStorage.getItem("token")};f.a.post("/api/aduser",o).then(function(t){n("SET_USERINFO",t.data),e(t.data)},function(e){t(e)})})}},b={SET_ROUTERS:function(e,n){e.addRouters=n,e.routers=k.concat(n),console.log(e.routers)},SET_USERINFO:function(e,n){e.userInfo=n},SET_TOKEN:function(e,n){e.token=n},SET_UID:function(e,n){e.uid=n}},v=new d.a.Store({state:h,actions:g,getters:{addRou:function(e){return e.addRouters},userInfo:function(e){return e.userInfo},id:function(e){return e.id}},mutations:b});a.default.use(i.a);var k=[{path:"/login",name:"登录页面",component:function(){return t.e(10).then(t.bind(null,"6Qob"))}},{path:"/404",name:"登录页面",component:function(){return t.e(2).then(t.bind(null,"wYVa"))}},{path:"/changePass",name:"修改密码",component:function(){return t.e(6).then(t.bind(null,"rhmB"))},meta:{title:"修改密码"}}],_=new i.a({routes:k}),S=[{path:"/home",name:"Home",component:function(){return t.e(3).then(t.bind(null,"/5L7"))},children:[{path:"/home",name:"Home",icon:"el-icon-s-data",component:function(){return t.e(0).then(t.bind(null,"FNcP"))},meta:{role:["admin","super_editor"],title:"首页"}},{path:"/user",name:"user",icon:"el-icon-user",meta:{role:["admin","super_editor"],title:"用户列表"},component:function(){return t.e(4).then(t.bind(null,"eJSA"))}},{path:"/order",name:"order",icon:"el-icon-s-order",component:function(){return t.e(5).then(t.bind(null,"H6RF"))},meta:{role:["admin","super_editor"],title:"订单列表"}},{path:"/banner",name:"banner",icon:"el-icon-menu",component:function(){return t.e(9).then(t.bind(null,"l6tK"))},meta:{role:["admin","super_editor"],title:"广告信息"}},{path:"/adminUser",name:"adminUser",icon:"el-icon-user-solid",component:function(){return t.e(7).then(t.bind(null,"Tkot"))},meta:{role:["admin","super_editor"],title:"员工管理"}},{path:"/addAdminUser",name:"addAdminUser",icon:"el-icon-circle-plus-outline",component:function(){return t.e(8).then(t.bind(null,"DCq2"))},meta:{role:["admin","super_editor"],title:"增加员工"}},{path:"/editor",name:"editor",icon:"el-icon-files",component:function(){return t.e(1).then(t.bind(null,"S6AX"))},meta:{role:["admin","super_editor"],title:"文章管理"}},{path:"/purchase",name:"purchase",icon:"el-icon-data-analysis",component:function(){return t.e(11).then(t.bind(null,"O0C3"))},meta:{role:["admin","super_editor"],title:"采购系统"}}]},{path:"*",redirect:"/404",hidden:!0}],R=t("mvHQ"),U=t.n(R);f.a.defaults.timeout=5e3,f.a.interceptors.request.use(function(e){return e.data=U()(e.data),e.headers={"Content-Type":"application/json; charset=utf-8",token:sessionStorage.getItem("token")},e},function(e){return l.a.reject(err)}),f.a.interceptors.response.use(function(e){return e},function(e){if(e&&e.response)switch(e.response.status){case 400:console.log("错误请求");break;case 401:console.log("未授权，请重新登录");break;case 403:console.log("拒绝访问");break;case 404:console.log("请求错误,未找到该资源");break;case 405:console.log("请求方法未允许");break;case 408:console.log("请求超时");break;case 500:console.log("服务器端出错");break;case 501:console.log("网络未实现");break;case 502:console.log("网络错误");break;case 503:console.log("服务不可用");break;case 504:console.log("网络超时");break;case 505:console.log("http版本不支持该请求");break;default:console.log("连接错误"+e.response.status)}else console.log("连接到服务器失败");return l.a.resolve(e.response)});var w={post:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new l.a(function(t,o){f.a.post(e,n).then(function(e){t(e.data)},function(e){o(e)})})}},I={login:"/login",order_all:"/order/all/ready",order_page:"/order/page",orderSearchId:"/order/search/oid",orderSearchMobile:"/order/search/mobile",orderSearchType:"/order/search/type",user_all:"/users",user_page:"/users/page",project:"/order/update/project",done:"/order/update/done",aduser:"/aduser",getAllUser:"/aduser/all/user",deleteUser:"/aduser/delete/user",updateUser:"/aduser/update/user",addUser:"/aduser/add/user",password:"/password",bannerPage:"/banner/page",bannerAll:"/banner/all",bannerAdd:"/banner/add",bannerUpdate:"/banner/update",bannerDelete:"/banner/delete",bannerInfo:"/banner/info",wxchatBan:"/wxchat/code",oederEchart:"/echart/order",userEchart:"/echart/user"},E=t("zL8q"),O=t.n(E),T=t("XLwt"),y=t.n(T),A=t("mw3O"),q=t.n(A),N=(t("tvR6"),t("Y81h")),x=t.n(N),F=(t("UVIz"),t("G0J2")),H=t.n(F);t("3f40"),t("4qOc"),t("+cgv");a.default.use(H.a),a.default.use(O.a),a.default.prototype.$http=w,a.default.prototype.$echarts=y.a,a.default.prototype.$common=I,a.default.prototype.$qs=q.a,a.default.config.productionTip=!1;var j=["/login"];_.beforeEach(function(e,n,t){sessionStorage.getItem("token")?"/login"===e.path?t({path:"/"}):""==v.getters.userInfo?v.dispatch("GetUserInfo").then(function(n){var o=n.roles.split(",");v.dispatch("GenerateRoutes",{roles:o}).then(function(){console.log("addrouters",v.getters.addRou),_.addRoutes(v.getters.addRou),t(r()({},e,{replace:!0}))})}):(x.a.start(),t()):-1!==j.indexOf(e.path)?t():t("/login")}),_.afterEach(function(e){x.a.done()}),new a.default({el:"#app",router:_,store:v,components:{App:s},template:"<App/>"})},UVIz:function(e,n){},cy71:function(e,n){},tvR6:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.3ee163cf39113363a66a.js.map