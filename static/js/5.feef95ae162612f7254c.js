webpackJsonp([5],{H6RF:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{activeName:"0",tableData5:[],roles:"",currentPage:1,pagesize:20,total:3,formInline:{searchIup:"",region:""},orderBtnType:[{cor:"",type:"0",title:"全部订单"},{cor:"primary",type:"1",title:"待付款"},{cor:"success",type:"2",title:"待完成"},{cor:"danger",type:"3",title:"已完成"},{cor:"info",type:"4",title:"已取消"},{cor:"danger",type:"5",title:"维权中"},{cor:"info",type:"6",title:"退款完成"}]}},mounted:function(){this.PageOrderList(),this.roles=this.$store.state.userInfo.roles},methods:{bindClickType:function(e){var t=this,r="/api"+this.$common.orderSearchType,a={order_type:e.name};t.$http.post(r,a).then(function(e){t.tableData5=e.data}).catch(function(e){})},handleSizeChange:function(e){this.pagesize=e,this.PageOrderList(),console.log(this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,this.PageOrderList(),console.log(this.currentPage)},PageOrderList:function(){var e=this,t="/api"+this.$common.order_page,r={offset:e.currentPage,limit:e.pagesize};e.$http.post(t,r).then(function(t){console.log(t),"200"==t.code&&(e.tableData5=t.data,e.total=t.num)}).catch(function(e){})},handleEdit:function(e,t){var r=this,a=this;a.$prompt("请输入接单人姓名","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){var o=e.value;console.log(o);var n="/api"+a.$common.project,s={order_oid:t,project:o};a.$http.post(n,s).then(function(e){console.log(e),1==e.status?(r.PageOrderList(),r.$message({message:"增加接单人成功",type:"success"})):r.$message({message:"已有接单人",type:"success"})}).catch(function(e){r.$message({message:"增加接单人失败",type:"success"})})}).catch(function(){})},handleDone:function(e,t,r){var a=this,o=this;r.user_id,r.comm_type,r.project,r.order_price;this.$confirm("是否已经完成订单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e="/api"+o.$common.done,r={order_oid:t};o.$http.post(e,r).then(function(e){console.log(e),3==e.status?o.$message({message:"该订单已经完成，无须再次操作",type:"success"}):1==e.status&&(a.PageOrderList(),o.$message({message:"完成订单",type:"success"}))}).catch(function(e){a.$message({message:"完成订单失败",type:"success"})})}).catch(function(){})},onSubmit:function(){var e=this,t=void 0,r={order_oid:this.formInline.searchIup};"id"==this.formInline.region?t="/api"+this.$common.orderSearchId:"mobile"==this.formInline.region&&(t="/api"+this.$common.orderSearchMobile),""==this.formInline.searchIup?this.PageOrderList():this.$http.post(t,r).then(function(t){console.log(t),1==t.status&&(e.tableData5=t.data)}).catch(function(t){e.$message({message:"搜索失败",type:"success"})})}}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order"},[r("div",{staticClass:"tag"},[r("div",{staticClass:"order_search"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[r("el-form-item",{attrs:{label:"查询方式"}},[r("el-select",{attrs:{placeholder:"请选择查询方式"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[r("el-option",{attrs:{label:"订单编号",value:"id"}}),e._v(" "),r("el-option",{attrs:{label:"用户手机号",value:"mobile"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"内容"}},[r("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.formInline.searchIup,callback:function(t){e.$set(e.formInline,"searchIup",t)},expression:"formInline.searchIup"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),e._v(" "),r("el-tabs",{on:{"tab-click":e.bindClickType},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.orderBtnType,function(t,a){return r("el-tab-pane",{attrs:{label:t.title,name:t.type}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData5}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"商品编号"}},[r("span",[e._v(e._s(t.row.order_oid))])]),e._v(" "),r("el-form-item",{attrs:{label:"用户编号"}},[r("span",[e._v(e._s(t.row.user_id))])]),e._v(" "),r("el-form-item",{attrs:{label:"商品类型"}},[r("span",[e._v(e._s(t.row.comm_type))])]),e._v(" "),r("el-form-item",{attrs:{label:"商品名称"}},[r("span",[e._v(e._s(t.row.order_name))])]),e._v(" "),r("el-form-item",{attrs:{label:"房屋面积"}},[r("span",[e._v(e._s(t.row.order_per))])]),e._v(" "),r("el-form-item",{attrs:{label:"预约时间"}},[r("span",[e._v(e._s(t.row.make_date))])]),e._v(" "),r("el-form-item",{attrs:{label:"下单时间"}},[r("span",[e._v(e._s(t.row.place_time))])]),e._v(" "),r("el-form-item",{attrs:{label:"小区地址"}},[r("span",[e._v(e._s(t.row.user_addree))])]),e._v(" "),r("el-form-item",{attrs:{label:"号楼门牌"}},[r("span",[e._v(e._s(t.row.user_num))])]),e._v(" "),r("el-form-item",{attrs:{label:"用户姓名"}},[r("span",[e._v(e._s(t.row.user_name))])]),e._v(" "),r("el-form-item",{attrs:{label:"手机号码"}},[r("span",[e._v(e._s(t.row.user_mobile))])]),e._v(" "),r("el-form-item",{attrs:{label:"支付方式"}},[0==t.row.play_way?r("span",[e._v("微信支付")]):e._e(),e._v(" "),1==t.row.play_way?r("span",[e._v("线下支付")]):e._e()]),e._v(" "),r("el-form-item",{attrs:{label:"支付价格"}},[r("span",[e._v(e._s(t.row.order_price))])]),e._v(" "),r("el-form-item",{attrs:{label:"接单人"}},[r("span",[e._v(e._s(t.row.project))])])],1)]}}],null,!0)}),e._v(" "),r("el-table-column",{attrs:{label:"商品编号",prop:"order_oid"}}),e._v(" "),r("el-table-column",{attrs:{label:"下单时间",prop:"place_time"}}),e._v(" "),r("el-table-column",{attrs:{label:"商品类型",prop:"comm_type"}}),e._v(" "),r("el-table-column",{attrs:{label:"支付方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.play_way?r("span",[e._v("微信支付")]):e._e(),e._v(" "),1==t.row.play_way?r("span",[e._v("线下支付")]):e._e()]}}],null,!0)}),e._v(" "),r("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.order_type?r("span",[e._v("待付款")]):e._e(),e._v(" "),2==t.row.order_type?r("span",[e._v("待完成")]):e._e(),e._v(" "),3==t.row.order_type?r("span",[e._v("已完成")]):e._e(),e._v(" "),4==t.row.order_type?r("span",[e._v("已取消")]):e._e(),e._v(" "),5==t.row.order_type?r("span",[e._v("维权中")]):e._e(),e._v(" "),6==t.row.order_type?r("span",[e._v("退款中")]):e._e(),e._v(" "),7==t.row.order_type?r("span",[e._v("退款完成")]):e._e()]}}],null,!0)}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row.order_oid)}}},[e._v("操作")]),e._v(" "),3!=t.row.order_type||4!=t.row.order_type||5!=t.row.order_type?r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDone(t.$index,t.row.order_oid,t.row)}}},[e._v("完成")]):e._e(),e._v(" "),6==t.row.order_type?r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("退款")]):e._e(),e._v(" "),"super_editor"==e.roles?r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]):e._e()]}}],null,!0)})],1)],1)}),1)],1),e._v(" "),r("div",{staticClass:"page"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pagesize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var n=r("VU/8")(a,o,!1,function(e){r("azUv")},"data-v-add96c2a",null);t.default=n.exports},azUv:function(e,t){}});
//# sourceMappingURL=5.feef95ae162612f7254c.js.map