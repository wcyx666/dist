{"version":3,"sources":["webpack:///./src/App.vue?02a9","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/store/index.js","webpack:///./src/router/index.js","webpack:///./src/http/http.js","webpack:///./src/http/common.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","hasPermission","roles","route","meta","role","some","indexOf","Vue","use","Vuex","state","token","routers","constantRouterMap","addRouters","uid","userInfo","psw","actions","GenerateRoutes","_ref","data","commit","promise_default","a","resolve","accessedRouters","asyncRouterMap","filter","v","children","length","child","GetUserInfo","_ref2","reject","sessionStorage","getItem","axios","post","then","res","err","mutations","SET_ROUTERS","concat","console","log","SET_USERINFO","SET_TOKEN","SET_UID","store","Store","getters","addRou","Router","path","component","e","bind","router","routes","title","titles","redirect","hidden","defaults","timeout","interceptors","request","config","stringify_default","headers","Content-Type","error","response","status","http","url","arguments","undefined","requst","login","order_all","orderSearchId","orderSearchMobile","user_all","project","done","aduser","getAllUser","deleteUser","updateUser","addUser","ElementUI","prototype","$http","Http","$echarts","echarts","$common","Common","$qs","qs","productionTip","whiteList","beforeEach","to","from","next","dispatch","split","addRoutes","replace","NProgress","start","afterEach","transition","el","components","App","template"],"mappings":"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","file":"static/js/app.9473f552295ab16c82c0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2b674180\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2b674180\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2b674180\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  width: 100%;\n  height: 100%;\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n#nprogress .bar {\n  background:#40c9c6 !important;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","// store/permission.js\r\nimport Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport axios from 'axios'\r\nimport { asyncRouterMap, constantRouterMap } from '../router';\r\nimport { stat } from 'fs';\r\nVue.use(Vuex);\r\n\r\n\r\nfunction hasPermission(roles, route) {\r\n  if (route.meta && route.meta.role) {\r\n    return roles.some(role => route.meta.role.indexOf(role) >= 0)\r\n  } else {\r\n    return true\r\n  }\r\n}\r\n\r\nconst state = {\r\n    token:\"\",\r\n    routers: constantRouterMap,\r\n    addRouters: [],\r\n    uid:\"\",\r\n    userInfo:\"\",\r\n    id:\"\",\r\n    psw:\"\"\r\n}\r\n\r\n\r\nconst actions = {\r\n    GenerateRoutes({ commit }, data) {\r\n        return new Promise(resolve => {\r\n          const { roles } = data;\r\n          const accessedRouters = asyncRouterMap.filter(v => {\r\n            if (hasPermission(roles, v)) {      \r\n              if (v.children && v.children.length > 0) {    \r\n                v.children = v.children.filter(child => {    \r\n                  if (hasPermission(roles, child)) {\r\n                    return child\r\n                  }\r\n                  return false;\r\n                });\r\n                return v\r\n              } else {\r\n                return v\r\n              }\r\n            }\r\n            return false;\r\n          });\r\n          commit('SET_ROUTERS', accessedRouters);\r\n          resolve();\r\n        })\r\n    },\r\n    GetUserInfo ({commit}) {\r\n      return new Promise((resolve, reject) => {\r\n        let url = '/api/aduser';\r\n        let data = {\r\n            uid : sessionStorage.getItem('uid'),\r\n            token : sessionStorage.getItem('token')\r\n        }\r\n        axios.post(url,data).then(res => {\r\n          commit('SET_USERINFO', res.data);\r\n          resolve(res.data);\r\n        },err => {\r\n          reject(err)\r\n        })\r\n      })\r\n    }\r\n}\r\n\r\nconst getters = {\r\n  addRou: state => state.addRouters,\r\n  userInfo: state => state.userInfo,\r\n  id: state => state.id,\r\n}\r\n\r\nconst mutations = {\r\n    SET_ROUTERS: (state, routers) => {\r\n        state.addRouters = routers;\r\n        state.routers = constantRouterMap.concat(routers);\r\n        console.log(state.routers)\r\n    },\r\n    SET_USERINFO: (state,data) => {\r\n      state.userInfo = data;\r\n    },\r\n    SET_TOKEN: (state,data) => {\r\n      state.token = data;\r\n    },\r\n    SET_UID: (state,data) => {\r\n      state.uid = data;\r\n    }\r\n}\r\n\r\nexport default new Vuex.Store({\r\n    state,\r\n    actions,\r\n    getters,\r\n    mutations\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport store from '../store'\nVue.use(Router)\n\nexport const constantRouterMap = [\n    {\n      path: '/login',\n      name: '登录页面',\n      component: () => import('@/view/login/login')\n    },\n    {\n      path: '/404',\n      name: '登录页面',\n      component: () => import('@/view/err/404')\n    }\n  ]\n//实例化vue的时候只挂载constantRouter\nexport default new Router({\n  routes: constantRouterMap\n});\n\nexport const asyncRouterMap = [\n  {\n    path: '/home',\n    name: 'Home',\n    component: () => import('@/view/home/home'),\n    meta: { role: ['admin','staff'] },\n    children:[\n      {\n        path: '',\n        name: '首页',\n        component: () => import('@/view/layout/layout'),\n        meta: { role: ['admin','staff','super_editor'], title:\"首页\" },\n      },\n      {\n        path: '/user',\n        name: '用户列表',\n        meta: { role: ['admin','staff','super_editor'], title: \"用户列表\" },\n        component: () => import('@/view/user/user'),\n        titles: { title:\"用户列表\" }\n      },\n      {\n        path: '/order',\n        name: '订单列表',\n        component: () => import('@/view/order/order'),\n        meta: { role: ['admin','staff','super_editor'], title: \"订单列表\" },\n      },\n      {\n        path: '/banner',\n        name: '广告信息',\n        component: () => import('@/view/banner/banner'),\n        meta: { role: ['admin','super_editor'], title: \"广告信息\" },\n      },\n      {\n        path: '/adminUser',\n        name: '用户列表',\n        component: () => import('@/view/jurisdiction/user'),\n        meta: { role: ['admin','super_editor'], title: \"用户列表\" },\n      },\n      {\n        path: '/addAdminUser',\n        name: '新增用户',\n        component: () => import('@/view/jurisdiction/add_user'),\n        meta: { role: ['admin','super_editor'], title: \"新增用户\" },\n      },\n    ]\n  },\n  { path: '*', redirect: '/404', hidden: true }\n];\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import axios from 'axios';\r\n\r\nimport store from '@/store'//引入store\r\n\r\naxios.defaults.timeout = 5000;\r\n//axios.defaults.baseURL ='http://localhost:3000'; //填写域名\r\n\r\n//http request 拦截器\r\naxios.interceptors.request.use(\r\n  config => {\r\n    config.data = JSON.stringify(config.data);\r\n    config.headers = {\r\n      'Content-Type':'application/json; charset=utf-8',\r\n      'token':sessionStorage.getItem('token')\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\n//响应拦截器即异常处理\r\naxios.interceptors.response.use(response => {\r\n    return response\r\n}, err => {\r\n    if (err && err.response) {\r\n      switch (err.response.status) {\r\n        case 400:\r\n            console.log('错误请求')\r\n          break;\r\n        case 401:\r\n            console.log('未授权，请重新登录')\r\n          break;\r\n        case 403:\r\n          console.log('拒绝访问')\r\n          break;\r\n        case 404:\r\n          console.log('请求错误,未找到该资源')\r\n          break;\r\n        case 405:\r\n          console.log('请求方法未允许')\r\n          break;\r\n        case 408:\r\n          console.log('请求超时')\r\n          break;\r\n        case 500:\r\n          console.log('服务器端出错')\r\n          break;\r\n        case 501:\r\n          console.log('网络未实现')\r\n          break;\r\n        case 502:\r\n          console.log('网络错误')\r\n          break;\r\n        case 503:\r\n          console.log('服务不可用')\r\n          break;\r\n        case 504:\r\n          console.log('网络超时')\r\n          break;\r\n        case 505:\r\n          console.log('http版本不支持该请求')\r\n          break;\r\n        default:\r\n          console.log(`连接错误${err.response.status}`)\r\n      }\r\n    } else {\r\n      console.log('连接到服务器失败')\r\n    }\r\n    return Promise.resolve(err.response)\r\n})\r\n\r\n\r\nexport default {\r\n    //post请求\r\n    post(url,data = {}){\r\n      return new Promise((resolve,reject) => {\r\n        axios.post(url,data)\r\n             .then(response => {\r\n               resolve(response.data);\r\n             },err => {\r\n               reject(err)\r\n             })\r\n      })\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/http/http.js","const requst = {\r\n    login: \"/login\",// 登录\r\n    order_all: \"/order/all/ready\",// 全部订单列表\r\n    orderSearchId: \"/order/search/oid\",// 搜索订单id\r\n    orderSearchMobile: \"/order/search/mobile\",// 搜索订单手机号码\r\n    user_all: \"/users\",// 全部用户\r\n    project: \"/order/update/project\",// 增加接单人\r\n    done: \"/order/update/done\",// 增加接单人\r\n    aduser: \"/aduser\",// 获取用户名信息\r\n    getAllUser: \"/aduser/all/user\",// 获取用户\r\n    deleteUser: \"/aduser/delete/user\",// 删除用户\r\n    updateUser: \"/aduser/update/user\",// 修改用户信息\r\n    addUser: \"/aduser/add/user\",// 添加新用户\r\n}\r\n\r\nexport default requst;\n\n\n// WEBPACK FOOTER //\n// ./src/http/common.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport Http from './http/http'\nimport Common from './http/common'\nimport ElementUI from 'element-ui';\nimport echarts from 'echarts'\nimport qs from 'qs';\nimport Vuex from 'vuex';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport store from './store'//引入store\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\nVue.use(ElementUI);\nVue.prototype.$http = Http;\nVue.prototype.$echarts = echarts;\nVue.prototype.$common = Common;\nVue.prototype.$qs = qs;\nVue.config.productionTip = false;\n/* eslint-disable no-new */\nconst whiteList = ['/login']; // 免登录白名单\nrouter.beforeEach((to, from, next) => {\n  if ( sessionStorage.getItem('token') ) { // 判断是否有token\n    if (to.path === '/login') {\n      console.log(1)\n      next({ path: '/' });\n    } else {\n      \n      if (store.getters.userInfo == '') {\n        store.dispatch('GetUserInfo').then((res) => {\n          let roles = res.roles.split(',');\n          store.dispatch('GenerateRoutes', { roles }).then(() => { // 生成可访问的路由表\n            console.log('addrouters', store.getters.addRou)\n            router.addRoutes(store.getters.addRou) // 动态添加可访问路由表\n            next({ ...to, replace: true });\n          })\n        })  \n      } else {\n        NProgress.start();\n        next() //当有用户权限的时候，说明所有可访问路由已生成 如访问没权限的全面会自动进入404页面    \n      }\n    }\n  } else {\n    if (whiteList.indexOf(to.path) !== -1) { // 在免登录白名单，直接进入\n      next();\n    } else {\n      next('/login'); // 否则全部重定向到登录页\n    }\n  }\n});\nrouter.afterEach(transition => {\n  NProgress.done();\n});\nnew Vue({\n  el: '#app',\n  router,\n  store,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}