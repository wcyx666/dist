webpackJsonp([7],{Tkot:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{userList:[],roles:"",dialogFormVisible:!1,form:{uid:"",admin_name:"",admin_id:"",admin_jurisdiction:"",admin_phone:"",admin_post:"",admin_psw:"",admin_type:""},formLabelWidth:"120px"}},created:function(){this.getUser(),this.roles=this.$store.state.userInfo.roles},methods:{getUser:function(){var e=this,t=this,a="/api"+t.$common.getAllUser;this.$http.post(a).then(function(a){"200"==a.code?(t.userList=a.data,t.form.admin_name=a.data[0].admin_name,t.form.admin_id=a.data[0].admin_id,t.form.admin_jurisdiction=a.data[0].admin_jurisdiction,t.form.admin_phone=a.data[0].admin_phone,t.form.admin_post=a.data[0].admin_post,t.form.admin_psw=a.data[0].admin_psw,t.form.admin_type=a.data[0].admin_type):"404"==a.code&&(sessionStorage.clear(),e.$router.push({path:"/login"}))}).catch(function(t){e.$message({type:"success",message:"获取失败!"})})},handleUpdate:function(){var e=this,t={uid:this.form.uid,admin_name:this.form.admin_name,admin_id:this.form.admin_id,admin_jurisdiction:this.form.admin_jurisdiction,admin_phone:this.form.admin_phone,admin_post:this.form.admin_post,admin_psw:this.form.admin_psw},a="/api"+this.$common.updateUser;this.$http.post(a,t).then(function(t){console.log(t),1==t.status?(e.dialogFormVisible=!1,e.getUser(),e.$message({type:"success",message:"修改成功!"})):e.$message({type:"success",message:"已取消修改!"})}).catch(function(t){e.$message({type:"success",message:"修改失败!"})})},handleEdit:function(e,t){this.dialogFormVisible=!0,this.form.uid=t},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={uid:t},i="/api"+a.$common.deleteUser;a.$http.post(i,e).then(function(e){1==e.status?(a.getUser(),a.$message({type:"success",message:"删除成功!"})):a.$message({type:"success",message:"已取消删除!"})}).catch(function(e){a.$message({type:"success",message:"删除失败!"})})}).catch(function(){a.$message({type:"info",message:"已取消删除!"})})}},mounted:function(){}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList}},[a("el-table-column",{attrs:{label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.admin_post?a("span",[e._v("经理")]):e._e(),e._v(" "),2==t.row.admin_post?a("span",[e._v("客服")]):e._e(),e._v(" "),3==t.row.admin_post?a("span",[e._v("员工")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"admin_id",label:"账号"}}),e._v(" "),"admin"==e.roles||"super_editor"==e.roles?a("el-table-column",{attrs:{prop:"admin_psw",label:"密码"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"admin_phone",label:"手机号码"}}),e._v(" "),a("el-table-column",{attrs:{label:"权限"},scopedSlots:e._u([{key:"default",fn:function(t){return["super_editor"==t.row.admin_jurisdiction?a("span",[e._v("超级管理员")]):e._e(),e._v(" "),"admin"==t.row.admin_jurisdiction?a("span",[e._v("管理员")]):e._e(),e._v(" "),"staff"==t.row.admin_jurisdiction?a("span",[e._v("访问人")]):e._e()]}}])}),e._v(" "),"admin"==e.roles||"super_editor"==e.roles?a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row.admin_uid)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row.admin_uid)}}},[e._v("删除")])]}}],null,!1,3273225411)}):e._e()],1)],e._v(" "),a("el-dialog",{attrs:{title:"修改信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.admin_name,callback:function(t){e.$set(e.form,"admin_name",t)},expression:"form.admin_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.form.admin_id,callback:function(t){e.$set(e.form,"admin_id",t)},expression:"form.admin_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入密码"},model:{value:e.form.admin_psw,callback:function(t){e.$set(e.form,"admin_psw",t)},expression:"form.admin_psw"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.form.admin_phone,callback:function(t){e.$set(e.form,"admin_phone",t)},expression:"form.admin_phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职位","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.form.admin_post,callback:function(t){e.$set(e.form,"admin_post",t)},expression:"form.admin_post"}},[a("el-option",{attrs:{label:"经理",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"客服",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"员工",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"权限","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择权限"},model:{value:e.form.admin_jurisdiction,callback:function(t){e.$set(e.form,"admin_jurisdiction",t)},expression:"form.admin_jurisdiction"}},[a("el-option",{attrs:{label:"超级管理员",value:"super_editor"}}),e._v(" "),a("el-option",{attrs:{label:"管理员",value:"admin"}}),e._v(" "),a("el-option",{attrs:{label:"访问人",value:"staff"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleUpdate}},[e._v("确 定")])],1)],1)],2)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("qPjf")},"data-v-5e3e5ee9",null);t.default=o.exports},qPjf:function(e,t){}});
//# sourceMappingURL=7.7122fac11b91be1b3a4a.js.map